{{ define "main" }}
<div class="container">
  <div class="row mt-5">
    <h2>Table of Contents</h2>
    <nav id="TableOfContents">
      <ul>
        <li>
          <a href="#stable-anchor">Stable Releases</a>
        </li>
        <li>
          <a href="#nightly-anchor">Nightly Releases (aka Dev Builds)</a>
        </li>
        <li>
          <a href="#pr-anchor">Pull Request Builds</a>
        </li>
      </ul>
    </nav>
    <div class="row mb-3 mt-3" id="outage-alert" style="display: none;">
      <div class="col">
        <div class="card">
          <div class="row">
            <div class="col card-title">
              <h3><i class="fas fa-exclamation-triangle error-icon"></i>Unable to fetch release information. This can be
                due to:</h3>
            </div>
          </div>
          <div class="row text-truncate" class="" style="max-width: calc(100%)">
            <div class="col">
              <ul>
                <li>A critical backend service is experiencing an outage, <a
                    href="https://stats.uptimerobot.com/GAg8AuBByx">see our status page</a></li>
                <li>Your IP is being rate limited</li>
                <li>Something unexpected has occurred</li>
              </ul>
              <p>With the exception of the rate limiting issue, we are likely aware of the problem and are working on
                it / monitoring it.</p>
              <p>In the meantime, you may be able to download the releases directly <a
                  href="https://github.com/PCSX2/pcsx2/releases">from Github</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <h2 class="release-type-title mt-3 scroll-fix" id="stable-anchor">Stable Releases</h2>
    <p>
      Stable releases are infrequent but very well tested compared to the developer (nightly) releases. Documentation
      for setting
      up the release is included in the download. For information on how to get started with using PCSX2 (Dumping your
      BIOS and games),
      <a href="/guides/basic-setup">see the following guide</a>.
    </p>
    <p>
      If you encounter issues on the latest stable release, you can reach out for assistance on the <a
        href="https://discord.com/invite/TCz3t9k">Discord</a>.
    </p>
    <div id="latest-release-notes"></div>
  </div>
  <div class="row mt-5 d-flex justify-content-center" id="latest-release-artifacts"></div>
  <div class="row skeleton-wrapper">
    <div class="col-12 col-sm mb-4 d-flex justify-content-center">
      <div class="dropdown">
        <button class="btn btn-primary artifact-dropdown btn-lg dropdown-toggle" type="button" id="dropdownMenuButton"
          data-mdb-toggle="dropdown" aria-expanded="false" disabled>
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </button>
      </div>
    </div>
    <div class="col-12 col-sm mb-4 d-flex justify-content-center">
      <div class="dropdown">
        <button class="btn btn-primary artifact-dropdown btn-lg dropdown-toggle" type="button" id="dropdownMenuButton"
          data-mdb-toggle="dropdown" aria-expanded="false" disabled>
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </button>
      </div>
    </div>
    <div class="col-12 col-sm d-flex justify-content-center">
      <div class="dropdown">
        <button class="btn btn-primary artifact-dropdown btn-lg dropdown-toggle" type="button" id="dropdownMenuButton"
          data-mdb-toggle="dropdown" aria-expanded="false" disabled>
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </button>
      </div>
    </div>
  </div>
  {{- partial "ads/horizontal-row.html" -}}
  <div class="row mt-5 scroll-fix" id="stable-list">
    <h5>Stable Release List</h5>
  </div>
  <div class="row mt-2">
    <div class="table-responsive">
      <table class="table table-sm" id="stable-table">
        <thead>
          <tr>
            <th scope="col">Version</th>
            <th scope="col">Download Links</th>
            <th scope="col">Release Date</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody id="stable-table-body">
          {{- partial "downloads/skeleton-table.html" (dict "numRows" 10 "numCols" 4) -}}
        </tbody>
      </table>
    </div>
    <div class="row justify-content-end mt-3 pagination-container" id="stable-pagination-container"></div>
  </div>

  <div class="row mt-5">
    <h2 class="release-type-title scroll-fix" id="nightly-anchor">Nightly Builds</h2>
    <p>
      Nightly builds are based on the latest in-developement version. As a result, these releases are intended
      for those who want to, or require, being on the bleeding edge. They may contain unresolved bugs or issues,
      use at your own discretion with this in mind. For information on how to get started with using PCSX2 (Dumping
      your BIOS and games), <a href="/guides/basic-setup">see the following guide</a>.
    </p>
    <p>
      For information on how to use the nightly releases <a
        href="https://github.com/PCSX2/pcsx2/wiki/Nightly-Build-Usage-Guide" target="blank">see here</a>.
    </p>
    <div id="latest-nightly-notes"></div>
  </div>
  <div class="row mt-5 d-flex justify-content-center" id="latest-nightly-artifacts"></div>
  <div class="row skeleton-wrapper">
    <div class="col-12 col-sm mb-4 d-flex justify-content-center">
      <div class="dropdown">
        <button class="btn btn-primary artifact-dropdown btn-lg dropdown-toggle" type="button" id="dropdownMenuButton"
          data-mdb-toggle="dropdown" aria-expanded="false" disabled>
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </button>
      </div>
    </div>
    <div class="col-12 col-sm mb-4 d-flex justify-content-center">
      <div class="dropdown">
        <button class="btn btn-primary artifact-dropdown btn-lg dropdown-toggle" type="button" id="dropdownMenuButton"
          data-mdb-toggle="dropdown" aria-expanded="false" disabled>
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </button>
      </div>
    </div>
    <div class="col-12 col-sm d-flex justify-content-center">
      <div class="dropdown">
        <button class="btn btn-primary artifact-dropdown btn-lg dropdown-toggle" type="button" id="dropdownMenuButton"
          data-mdb-toggle="dropdown" aria-expanded="false" disabled>
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </button>
      </div>
    </div>
  </div>
  {{- partial "ads/horizontal-row.html" -}}
  <div class="row mt-5 scroll-fix" id="nightly-list">
    <h5>Nightly Release List</h5>
  </div>
  <div class="row mt-2">
    <div class="table-responsive">
      <table class="table table-sm" id="nightly-table">
        <thead>
          <tr>
            <th scope="col">Version</th>
            <th scope="col">Download Links</th>
            <th scope="col">Release Date</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody id="nightly-table-body">
          <!-- skeleton loading -->
          {{- partial "downloads/skeleton-table.html" (dict "numRows" 10 "numCols" 4) -}}
        </tbody>
      </table>
    </div>
    <div class="row justify-content-end mt-3 pagination-container" id="nightly-pagination-container"></div>
  </div>
  <div class="row mt-5">
    <h2 class="release-type-title scroll-fix" id="pr-anchor">Pull Request Builds</h2>
    <p>
      These are builds of in-progress work that has yet to merge into the projects codebase and are intended for those
      interested in assisting with the testing and code-review process. Otherwise, this provides an at-a-glance view of what
      we are actively working on.
    </p>
    <p>
      Note that you will require a GitHub account to download these builds from the GitHub Actions CI. If you do
      end up testing a pull request build and find issues, it is preferrable to describe the issue with steps to
      reproduce the problem on the pull request itself.
    </p>
  </div>
  <div class="row mt-2 scroll-fix" id="pull-requests-list">
    <div class="table-responsive">
      <table class="table table-sm" id="pull-request-table">
        <thead>
          <tr>
            <th scope="col">Author</th>
            <th scope="col">Pull Request</th>
            <th scope="col">Updated At</th>
            <th scope="col">Additions</th>
            <th scope="col">Deletions</th>
          </tr>
        </thead>
        <tbody id="pull-request-table-body">
          <!-- skeleton loading -->
          {{- partial "downloads/skeleton-table.html" (dict "numRows" 10 "numCols" 5) -}}
        </tbody>
      </table>
    </div>
    <div class="row justify-content-end mt-3 pagination-container" id="pull-request-pagination-container"></div>
  </div>
  {{- partial "ads/horizontal-row.html" -}}
</div>
{{ end }}
{{ define "additionalScripts" }}
<script src="/js/vendor/dot@1.1.3/doT.min.js"></script>
<script src="/js/vendor/marked@4.0.12/marked.min.js"></script>
<script src="/js/release-page.js"></script>
{{ end }}
